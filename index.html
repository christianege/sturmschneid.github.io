<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
  <meta charset="utf-8">
  <title>Sturmschneid</title>
  <meta name="author" content="Christian Ege">

  
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://ch.ege.io/">
  <link href="/favicon.png" type="image/png" rel="icon">
  <link href="/atom.xml" rel="alternate" title="Sturmschneid" type="application/atom+xml">

  <!-- http://opengraphprotocol.org/ -->
  <meta name="twitter:card" content="summary_large_image">
  <meta property="og:type" content="website">
  <meta property="og:url" content="http://ch.ege.io/">
  <meta property="og:title" content="Sturmschneid">
  

  <script src="/javascripts/libs/jquery/jquery-2.1.3.min.js"></script>

<link href="/assets/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/assets/bootstrap/dist/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css">


  
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">

  

</head>

  <body   >
    <a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
    <div id="wrap">
      <header role="banner">
        <nav class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" title="toggle navbar" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Sturmschneid</a>
        </div>

        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li class="active">
                    <a rel="index" href="/">Blog</a>
                </li>
                <li >
                    <a href="/blog/archives">Archives</a>
                </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                
                    <li>
                        <form class="search navbar-form navbar-right" action="https://www.google.com/search" method="GET">
                            <input type="hidden" name="sitesearch" value="ch.ege.io">
                            <div class="form-group">
                                <input class="form-control" type="text" name="q" placeholder="Search">
                            </div>
                        </form>
                    </li>
                
                <li>
                    <a class="subscribe-rss" href="/atom.xml" title="subscribe via RSS">
                        <span class="visible-xs">RSS</span>
                        <img class="hidden-xs" src="/images/rss.png" alt="RSS">
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</nav>


      </header>
      <div id="main" role="main" class="container">
        <div id="content">
          <div class="row">
  <div class="page-content col-md-9">
    <div class="blog-index" itemscope itemtype="http://schema.org/Blog">
    <meta itemprop="name" content="Sturmschneid" />
    
    <meta itemprop="url" content="http://ch.ege.io" />
      
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2016-01-31T14:48:42+01:00"  data-updated="true" itemprop="datePublished dateCreated">Sun 31 Jan 2016,  2:48 PM</time>
        
           | <a href="/blog/2016/01/31/unbricking-a-buffalo-whr-hp-g300n/#disqus_thread" itemprop="discussionUrl"
             data-disqus-identifier="http://ch.ege.io/blog/2016/01/31/unbricking-a-buffalo-whr-hp-g300n/">Comments</a>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/2016/01/31/unbricking-a-buffalo-whr-hp-g300n/" itemprop="url">Unbricking a Buffalo WHR-HP-G300N</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><p>Last week I attended the first <a href="https://freifunk.net/">Freifunk</a> meeting in my hometown. The decision was made to participate with my old <a href="https://wiki.openwrt.org/toh/buffalo/whr-hp-g300n">Buffalo WHR-HP-G300N</a> router.</p>

<p>Before flashing the latest <a href="https://freifunk.net/">Freifunk</a> firmware I tried to install a vanilla OpenWrt image for this router. But the outdated DD-WRT image on this router refused to get updated.</p>

<p>After several retries I gave up on the suggested tftp method. I tried several combinations of MAC-Addresses and interfaces always without success. Luckily <a href="http://scarygliders.net/2010/02/23/hacking-around-the-japanese-buffalo-wzr-hp-g300n/">Kevin Cave on Scarygliders</a> pointed out that the U-Boot on the router can be interrupted with <code>CTRL-C</code> when it tries to request a firmware by tftp.</p>

<p>He also pointed out that the OpenWrt image is prefixed with some <code>0x20 byte</code> header. So I tweaked the U-Boot environment a bit so I could skip to alter the firmware.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>tftp server(receive) go, waiting:4[sec]
</span><span class='line'>Load address: 0x80f00000
</span><span class='line'>
</span><span class='line'>Abort
</span><span class='line'>no file was loaded.
</span><span class='line'>ar7240&gt; &lt;INTERRUPT&gt;
</span><span class='line'>ar7240&gt;</span></code></pre></td></tr></table></div></figure>


<p>There are some interesting environment variables related to firmware update</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ar7240&gt; printenv
</span><span class='line'>[...]
</span><span class='line'>u_fw=erase $fw_eaddr; cp.b $fileaddr BF040000 $filesize; bootm BF040000;
</span><span class='line'>ut_fw=tftp $tmp_ram firmware.bin; erase $fw_eaddr; cp.b $fileaddr BF040000 $filesize; bootm BF040000;
</span><span class='line'>ut_uboot=tftp $tmp_ram u-boot.bin; protect off $uboot_eaddr; erase $uboot_eaddr; cp.b $fileaddr BF000000 $filesize;
</span><span class='line'>[...]</span></code></pre></td></tr></table></div></figure>


<p>After setting up a <a href="https://wiki.openwrt.org/doc/howto/generic.flashing.tftp">TFTP server</a> and changing your host system to the IPv4 address off <code>192.168.11.2</code> You can download a firmware image right from the U-BOOT command prompt:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ar7240&gt; tftp $tmp_ram openwrt-ar71xx-generic-whr-hp-g300n-squashfs-tftp.bin
</span><span class='line'>Using eth1 device
</span><span class='line'>TFTP from server 192.168.11.2; our IP address is 192.168.11.1
</span><span class='line'>Filename 'openwrt-ar71xx-generic-whr-hp-g300n-squashfs-tftp.bin'.
</span><span class='line'>Load address: 0x80f00000
</span><span class='line'>Loading: #################################################################
</span><span class='line'>         #################################################################
</span><span class='line'>         #################################################################
</span><span class='line'>         #################################################################
</span><span class='line'>         #################################################################
</span><span class='line'>         #################################################################
</span><span class='line'>         #################################################################
</span><span class='line'>         #################################################################
</span><span class='line'>         #################################################################
</span><span class='line'>         ##############################
</span><span class='line'>done
</span><span class='line'>Bytes transferred = 3145764 (300024 hex)</span></code></pre></td></tr></table></div></figure>


<p>So let&rsquo;s check if the image also suffer from this 0x20 bytes offset</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ar7240&gt; iminfo $fileaddr
</span><span class='line'>
</span><span class='line'>## Checking Image at 80f00000 ...
</span><span class='line'>   Bad Magic Number
</span><span class='line'>ar7240&gt;</span></code></pre></td></tr></table></div></figure>


<p>Of course it is as-well padded by this 0x20 byte offset. Just out of curiosity</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ar7240&gt; md $fileaddr
</span><span class='line'>80f00000: 23204169 72737461 74696f6e 20507562    # Airstation Pub
</span><span class='line'>80f00010: 6c696320 466d7431 00000000 00000000    lic Fmt1........
</span><span class='line'>80f00020: 27051956 d3488451 56acca20 00115622    '..V.H.QV.. ..V"
</span><span class='line'>80f00030: 80060000 80060000 b3e42d50 05050203    ..........-P....
</span><span class='line'>80f00040: 4d495053 204f7065 6e577274 204c696e    MIPS OpenWrt Lin
</span><span class='line'>80f00050: 75782d33 2e31382e 32330000 00000000    ux-3.18.23......
</span><span class='line'>80f00060: 6d000080 00344934 00000000 0000006f    m....4I4.......o
</span><span class='line'>80f00070: fdffffa3 b77f4c34 f7f8df51 7a6edb3c    ......L4...Qzn.&lt;
</span><span class='line'>80f00080: ec7d4ea1 71788f3e 662e5921 bcf0be72    .}N.qx.&gt;f.Y!...r
</span><span class='line'>80f00090: a6181f38 843f1584 43cbe578 c27d99b4    ...8.?..C..x.}..
</span><span class='line'>80f000a0: b9a7b99a d79b850d 10e56023 bc86313d    ..........`#..1=
</span><span class='line'>80f000b0: f4653466 dd6085ac b5474b05 33efbdb7    .e4f.`...GK.3...
</span><span class='line'>80f000c0: 76abd394 bebfacf4 f08fe76a db6961b8    v..........j.ia.
</span><span class='line'>80f000d0: d341676a 67864eb5 e28b8dbd 3dbb489e    .Agjg.N.....=.H.
</span><span class='line'>80f000e0: 978fb0a7 01f8fcc8 a0ebe5e4 54e07d07    ............T.}.
</span><span class='line'>80f000f0: 05175829 289f8be8 6ac6d14c ece8db8a    ..X)(...j..L....</span></code></pre></td></tr></table></div></figure>


<p>In the line starting with <code>80f00020</code> we can see the magic <code>27051956</code> ,the expected uImage header, which <a href="http://scarygliders.net/2010/02/23/hacking-around-the-japanese-buffalo-wzr-hp-g300n/">Kevin Cave on Scarygliders</a> pointed out. So let&rsquo;s skip this header</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ar7240&gt; setenv fileaddr 80F00020</span></code></pre></td></tr></table></div></figure>


<p>Please do not save the environment after this modification otherwise your router will may not work properly after this. This is just a temporary modification!</p>

<p>After this modification the test should past fine</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ar7240&gt; iminfo $fileaddr
</span><span class='line'>
</span><span class='line'>## Checking Image at 80f00020 ...
</span><span class='line'>   Image Name:   MIPS OpenWrt Linux-3.18.23
</span><span class='line'>   Created:      2016-01-30  14:35:12 UTC
</span><span class='line'>   Image Type:   MIPS Linux Kernel Image (lzma compressed)
</span><span class='line'>   Data Size:    1136162 Bytes =  1.1 MB
</span><span class='line'>   Load Address: 80060000
</span><span class='line'>   Entry Point:  80060000
</span><span class='line'>   Verifying Checksum ... OK
</span><span class='line'>ar7240&gt;</span></code></pre></td></tr></table></div></figure>


<p>Bingo! This looks promising. We now have to erase the flash and copy the image to it&rsquo;s new place.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ar7240&gt; erase $fw_eaddr
</span><span class='line'>Erase Flash from 0xbf040000 to 0xbf3effff in Bank # 1
</span><span class='line'>First 0x40 last 0x3ef sector size 0x1000                                                                                                                                                                  992
</span><span class='line'>Erased 944 sectors
</span><span class='line'>ar7240&gt; cp.b $fileaddr BF040000 $filesize
</span><span class='line'>Copy to Flash...
</span><span class='line'> Copy 3145764 byte to Flash... write addr: bf040000
</span><span class='line'>done
</span><span class='line'>ar7240&gt;</span></code></pre></td></tr></table></div></figure>


<p>Now it is time to check if everything went fine or if we have created something for the dust bin.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ar7240&gt; bootm BF040000
</span><span class='line'>## Booting image at bf040000 ...
</span><span class='line'>   Image Name:   MIPS OpenWrt Linux-3.18.23
</span><span class='line'>   Created:      2016-01-30  14:35:12 UTC
</span><span class='line'>   Image Type:   MIPS Linux Kernel Image (lzma compressed)
</span><span class='line'>   Data Size:    1136162 Bytes =  1.1 MB
</span><span class='line'>   Load Address: 80060000
</span><span class='line'>   Entry Point:  80060000
</span><span class='line'>   Verifying Checksum ... OK
</span><span class='line'>   Uncompressing Kernel Image ... OK
</span><span class='line'>No initrd
</span><span class='line'>## Transferring control to Linux (at address 80060000) ...
</span><span class='line'>## Giving linux memsize in bytes, 33554432
</span><span class='line'>
</span><span class='line'>Starting kernel ...
</span><span class='line'>
</span><span class='line'>[    0.000000] Linux version 3.18.23 (chris@quadros) (gcc version 4.8.3 (OpenWrt/Linaro GCC 4.8-2014.04 r48532) ) #1 Sat Jan 30 15:35:03 CET 2016
</span><span class='line'>[    0.000000] bootconsole [early0] enabled
</span><span class='line'>[    0.000000] CPU0 revision is: 00019374 (MIPS 24Kc)
</span><span class='line'>[    0.000000] SoC: Atheros AR7240 rev 2
</span><span class='line'>[    0.000000] Determined physical RAM map:
</span><span class='line'>[    0.000000]  memory: 02000000 @ 00000000 (usable)
</span><span class='line'>[    0.000000] Initrd not found or empty - disabling initrd
</span><span class='line'>[    0.000000] Zone ranges:
</span><span class='line'>[    0.000000]   Normal   [mem 0x00000000-0x01ffffff]
</span><span class='line'>[    0.000000] Movable zone start for each node
</span><span class='line'>[    0.000000] Early memory node ranges
</span><span class='line'>[...]
</span><span class='line'>BusyBox v1.23.2 (2016-01-30 15:30:41 CET) built-in shell (ash)
</span><span class='line'>
</span><span class='line'>  _______                     ________        __
</span><span class='line'> |       |.-----.-----.-----.|  |  |  |.----.|  |_
</span><span class='line'> |   -   ||  _  |  -__|     ||  |  |  ||   _||   _|
</span><span class='line'> |_______||   __|_____|__|__||________||__|  |____|
</span><span class='line'>          |__| W I R E L E S S   F R E E D O M
</span><span class='line'> -----------------------------------------------------
</span><span class='line'> CHAOS CALMER (Chaos Calmer, r48532)
</span><span class='line'> -----------------------------------------------------
</span><span class='line'>  * 1 1/2 oz Gin            Shake with a glassful
</span><span class='line'>  * 1/4 oz Triple Sec       of broken ice and pour
</span><span class='line'>  * 3/4 oz Lime Juice       unstrained into a goblet.
</span><span class='line'>  * 1 1/2 oz Orange Juice
</span><span class='line'>  * 1 tsp. Grenadine Syrup
</span><span class='line'> -----------------------------------------------------
</span><span class='line'>root@OpenWrt:/#
</span></code></pre></td></tr></table></div></figure>


<p>This looks like full success to me. Next step will be increasing the flash size to 8 MB to provide enough space for the <a href="https://ffbsee.de">FFBsee</a> firmware.</p>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2015-11-01T09:23:35+01:00"  data-updated="true" itemprop="datePublished dateCreated">Sun  1 Nov 2015,  9:23 AM</time>
        
           | <a href="/blog/2015/11/01/activating-usb-otg-udoo-neos-composite-ethernet-plus-serial-gadget-support-in-yoctos-poky/#disqus_thread" itemprop="discussionUrl"
             data-disqus-identifier="http://ch.ege.io/blog/2015/11/01/activating-usb-otg-udoo-neos-composite-ethernet-plus-serial-gadget-support-in-yoctos-poky/">Comments</a>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/2015/11/01/activating-usb-otg-udoo-neos-composite-ethernet-plus-serial-gadget-support-in-yoctos-poky/" itemprop="url">Activating USB_OTG Composite Ethernet + Serial Gadget Support in Yocto&#8217;s Poky for UDOO Neo</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><p>After playing with UDOOBuntu and the nice USB OTG Gadget support my decision was to provide something similar for my Yocot Port as-well. It turned out that the serial Gadget support was pretty easy the Ethernet support is more complex.</p>

<p>For serial console over the USB OTG port of your NEO you have to change the <code>udooneo.conf</code> file in the folder <code>conf\machine</code> of <code>meta-fsl-arm-extra</code></p>

<pre><code>MACHINE_FEATURES += " usbgadget usbhost"
SERIAL_CONSOLES ?= "115200;ttymxc0 115200;ttyGS0"

KERNEL_MODULE_AUTOLOAD += " g_serial"
</code></pre>

<p>This adds usbgadget support and automatically loads the module g_serial on startup. The line <code>SERIAL_CONSOLES</code> automatically spawns a <a href="https://en.wikipedia.org/wiki/Getty_%28Unix%29">getty</a> on  <code>/dev/ttyGS0</code> through the <a href="https://en.wikipedia.org/wiki/Init#SysV-style">inittab</a>.</p>

<p>Due to the fact that only one USB OTG gagdget module can be loaded there are some composite modules available. A combination of serial and Ethernet for example is the  <code>g_cdc</code>. To use <code>g_cdc</code> instead of <code>g_serial</code> is pretty simple just change the line</p>

<pre><code>KERNEL_MODULE_AUTOLOAD += " g_serial"
</code></pre>

<p>To this</p>

<pre><code>KERNEL_MODULE_AUTOLOAD += " g_cdc"
</code></pre>

<p>This will automatically provide serial support and spawns a <code>usb0</code> network device device on the target and the host. But my Ubuntu host was not able to set get an IP-Adress for this interface. Setting one by hand resolved this. But this is not comparable to the out of the box experience UDOOBuntu provides.</p>

<p>On your host computer you&rsquo;ll see something like this in your dmesg log</p>

<pre><code>[ 9515.050081] usb 4-1.4.1.1: new high-speed USB device number 12 using ehci-pci
[ 9515.144407] usb 4-1.4.1.1: New USB device found, idVendor=0525, idProduct=a4aa
[ 9515.144411] usb 4-1.4.1.1: New USB device strings: Mfr=1, Product=2, SerialNumber=0
[ 9515.144412] usb 4-1.4.1.1: Product: CDC Composite Gadget
[ 9515.144414] usb 4-1.4.1.1: Manufacturer: Linux 3.14.28_1.0.0_ga-udooboard+g580e305 with 2184000.usb
[ 9515.152930] cdc_ether 4-1.4.1.1:1.0 usb0: register 'cdc_ether' at usb-0000:00:1d.0-1.4.1.1, CDC Ethernet Device, 76:26:58:xx:xx:xx
[ 9515.153714] cdc_acm 4-1.4.1.1:1.2: ttyACM0: USB ACM device
[ 9515.176120] cdc_ether 4-1.4.1.1:1.0 usb0: kevent 12 may have been dropped
[ 9515.193036] IPv6: ADDRCONF(NETDEV_UP): usb0: link is not ready
[ 9515.377616] userif-3: sent link down event.
[ 9515.377619] userif-3: sent link up event.
</code></pre>

<p>For serial console access you can connet to the UDOO Neo by attaching minicom to <code>/dev/ttyACM0</code> at 115200 Baud 8N1 No flow control, or any other treminal emulator of your choice.</p>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2015-10-31T16:56:22+01:00"  data-updated="true" itemprop="datePublished dateCreated">Sat 31 Oct 2015,  4:56 PM</time>
        
           | <a href="/blog/2015/10/31/attaching-a-serial-console-to-udoo-neo/#disqus_thread" itemprop="discussionUrl"
             data-disqus-identifier="http://ch.ege.io/blog/2015/10/31/attaching-a-serial-console-to-udoo-neo/">Comments</a>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/2015/10/31/attaching-a-serial-console-to-udoo-neo/" itemprop="url">Attaching a Serial Console to UDOO Neo</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><p>Yesterday my long time awaited <a href="http://www.udoo.org/udoo-neo/">UDOO Neo</a> board has arrived. They do provide a really good <a href="http://www.udoo.org/get-started-neo/">getting started guide</a> for UDOO Neo. But for my Yocto Port I need access to the serial console to check the output of the U-Boot and the kernel. So I&rsquo;ve checked the <a href="http://udoo.org/download/files/schematics/UDOO_NEO_schematics.pdf">UDOO Neo Schematics</a> and located UART1 on the connector J7.</p>

<p><img src="/images/posts/UDOOUartNeo.png"></p>

<p>It is so incredible that they do provide the schematics. It is much easier to check the PINOUT. To connect the UDOO to a terminal client you need the following stuff</p>

<ul>
<li>1 x USB to serial converter with 3.3V output. Do not use any 5V type, this may damage your UDOO Neo! I use some cheap Chinese <a href="https://hackaday.com/tag/ch341">CH341</a> USB to UART converters. They cost about 3€ but are not FTDI clones.</li>
<li>3 Jumper wires. It depends on your USB to serial converter if you need male <-> male or female <-> male. I needed female <-> male connectors</li>
<li>1 x <a href="http://www.udoo.org/udoo-neo/">UDOO Neo board</a></li>
<li>1 x Powersupply for the Neo.</li>
<li>1 x Micro SD-Card with the UDOOBuntu or a <a href="http://ch.ege.io/blog/2015/09/19/openembedded-support-for-the-upcomming-udoo-neo/">Yocto build</a> for UDOO Neo</li>
</ul>


<p>For power connection and flashing the SD-Card please have a look at the <a href="http://www.udoo.org/get-started-neo/">getting started guide</a> for UDOO Neo.</p>

<p>Before you plug-in the serial wires you have to remove any power source from the UDOO board. Otherwise you may damage your board. Double check if your adapter is a 3.3V. Connect the ground line (GND) of your USB to serial converter with the PIN 11 of the J7 connector. Then you have to connect the RX and TX PINs. But remember you have to cross them. Why do we need to cross RX and TX?</p>

<p>This is because <code>TX</code> is transmit and if the UDOO Board and your PC are transmitting on the same line nothing is received on both sides. So you have to connect the <code>RX</code> PIN of the UDOO board, PIN 4 of J7, with the <code>TX</code> PIN of your converter. The <code>TX</code>, PIN 2 of J7, from UDOO is connected to the <code>RX</code> PIN of converter.</p>

<p><img src="/images/posts/UDOONeoAndUSBSeriell.png"></p>

<p>After this you can check <a href="http://www.udoo.org/tutorial/connecting-via-serial-cable/">their tutorial how to fire up an Terminal Emulator</a> on your Platform of choice and connect to the NEO at the following settings:</p>

<ul>
<li>115200 kB</li>
<li>8N1</li>
<li>No Flow-Control</li>
</ul>


<p>I do prefer minicom under Linux for this job.</p>

<h1>UDOO Neo direct USB console</h1>

<p>You may have noticed while booting the official <a href="http://www.udoo.org/get-started-neo/">UDOOBuntu image</a> image a new disk is suddenly mounted on your PC. And you have a new network interface connected as well. Last but not least even a new serial interface is available.</p>

<pre><code>[...]
[ 4885.463264] cdc_acm 4-1.4.1.1:1.2: ttyACM0: USB ACM device
[ 4885.463682] usbcore: registered new interface driver cdc_acm
[ 4885.463685] cdc_acm: USB Abstract Control Model driver for USB modems and ISDN adapters
[...]
</code></pre>

<p>You can use minicom with <code>/dev/ttyACM0</code> and the same settings like above.</p>

<pre><code>Ubuntu 14.04.3 LTS udooneo ttyGS0


default username:password is [udooer:udooer]
udooneo login:
</code></pre>

<p>This is absolutely awesome!</p>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2015-09-22T08:42:22+02:00"  data-updated="true" itemprop="datePublished dateCreated">Tue 22 Sep 2015,  8:42 AM</time>
        
           | <a href="/blog/2015/09/22/tweaking-freescales-yocto-community-bsp-builds/#disqus_thread" itemprop="discussionUrl"
             data-disqus-identifier="http://ch.ege.io/blog/2015/09/22/tweaking-freescales-yocto-community-bsp-builds/">Comments</a>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/2015/09/22/tweaking-freescales-yocto-community-bsp-builds/" itemprop="url">Tweaking Freescales Yocto Community BSP Builds</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><p><a href="https://twitter.com/scrumnl">Maurice le Rutte</a> asked me on Twitter if it is possible to add support for the first UDOO board and building a <a href="https://en.wikipedia.org/wiki/DirectFB">DirectFB</a> enabled image. After some research it looked like a solution for the DirectFB task should be not that big issue.</p>

<p>I guess you have already a running Yocto environment based on the Freescale BSP comunity layers. To build a DirectFB image some tweaking is needed. You have to add those lines to your <code>conf/local.conf</code></p>

<pre><code>DISTRO_FEATURES_remove = "x11"
DISTRO_FEATURES_remove = "wayland"
DISTRO_FEATURES_append = " directfb"
</code></pre>

<p>The first two lines remove support for wayland and X11 which will conflict with DirectFB and will prevent a successful build. With this modification you can build a DirectFB image. The extra white space in front of directfb is mandatory!</p>

<pre><code>bitbake core-image-directfb
</code></pre>

<p>This is the right time to fetch some coffee.</p>

<p>Another tweak I prefer to do in the <code>conf/local.conf</code> is switching from RPM to IPK as package manager. It is more lightweight and a little bit faster than RPM or DEB. You only have to change the variable <code>PACKAGE_CLASSES</code> to <code>package_ipk</code></p>

<pre><code>PACKAGE_CLASSES ?= "package_ipk"
</code></pre>

<p>At the moment I am working on a Machine configuration for the <a href="http://www.udoo.org/udoo-dual-and-quad/">UDOO Quad board</a></p>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2015-09-19T19:18:03+02:00"  data-updated="true" itemprop="datePublished dateCreated">Sat 19 Sep 2015,  7:18 PM</time>
        
           | <a href="/blog/2015/09/19/openembedded-support-for-the-upcomming-udoo-neo/#disqus_thread" itemprop="discussionUrl"
             data-disqus-identifier="http://ch.ege.io/blog/2015/09/19/openembedded-support-for-the-upcomming-udoo-neo/">Comments</a>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/2015/09/19/openembedded-support-for-the-upcomming-udoo-neo/" itemprop="url">OpenEmbedded Support for the Upcomming UDOO Neo</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><p>After beeing part of the <a href="https://www.kickstarter.com/projects/udoo/udoo-neo-raspberry-pi-arduino-wi-fi-bt-40-sensors/?src=i1">Kickstarter campaign</a> for the <a href="http://www.udoo.org/udoo-neo/">UDOO NEO board</a>. I am looking forward to play with this little beast.</p>

<p><img class="center" src="http://cdn.udoo.org/wp-content/uploads/2015/03/UDOO_neo_up2_ks_funded.png"></p>

<p>During the meantime I decided to add the <a href="http://www.udoo.org/udoo-neo/">UDOO NEO board</a> to the <a href="https://github.com/Freescale/meta-fsl-arm-extra">Freescale OpenEmbedded community layer</a>. Due to the fact my board did not yet arrived I&rsquo;ve not yet created a patch to ask for integration into the official <a href="https://github.com/Freescale/meta-fsl-arm-extra">Freescale OpenEmbedded community layer</a>. This will be done when I&rsquo;ve tested the layer.</p>

<p>If you are interested in my work you can find my personal fork right <a href="https://github.com/graugans/meta-fsl-arm-extra/">here at github</a>.
You have to use the <a href="https://github.com/graugans/meta-fsl-arm-extra/tree/fido">fido</a> branch. To keep things simple I&rsquo;ve created my own
branch of the <a href="https://github.com/graugans/fsl-community-bsp-platform">fsl-community-bsp-platform</a> repo repository.</p>

<h1>Installing the BSP</h1>

<p>To get the BSP you need to have repo installed and use it as:</p>

<p>Install the repo utility:</p>

<pre><code>$: mkdir ~/bin
$: curl http://commondatastorage.googleapis.com/git-repo-downloads/repo &gt; ~/bin/repo
$: chmod a+x ~/bin/repo
</code></pre>

<p>Download the BSP source:</p>

<pre><code>$: PATH=${PATH}:~/bin
$: mkdir fsl-community-bsp
$: cd fsl-community-bsp
$: repo init -u https://github.com/graugans/fsl-community-bsp-platform -b fido
$: repo sync
</code></pre>

<p>At the end of the commands you have every metadata you need to start work with.</p>

<h1>Building the Image</h1>

<p>To start a base image build execute the following command on a decent machine and grab some coffee&hellip;</p>

<p>$: source ./setup-environment udooneo-build
$: bitbake core-image-base</p>

<p>If everything was build fine you&rsquo;ll find a SD-Card image right here:</p>

<pre><code>tmp/deploy/images/udooneo/core-image-base-udooneo.sdcard
</code></pre>

<p>You can write this image directly to any supported SD-Card. Plug it into your freshly unboxed UDOO NEO and hopefully have fun. This image is completly untested and you have to use it on your own risk&hellip;</p>

<h1>Creating your personal Toolchain</h1>

<p>If you want to develop your own software for the UDOO Neo you&rsquo;ll need some cross toolchain. This can be achieved very easy with the OpenEmbedded universe.</p>

<pre><code>$ bitbake core-image-base -cpopulate_sdk
</code></pre>

<p>The resulting self extracting shell script you&rsquo;ll find right here:</p>

<pre><code>tmp/deploy/sdk/poky-glibc-x86_64-core-image-base-cortexa9hf-vfp-neon-toolchain-1.8.sh
</code></pre>

<p>In case of any questions just leave a comment on my Blog.</p>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2015-08-03T06:11:16+02:00"  data-updated="true" itemprop="datePublished dateCreated">Mon  3 Aug 2015,  6:11 AM</time>
        
           | <a href="/blog/2015/08/03/installing-stm32cubemx-on-linux/#disqus_thread" itemprop="discussionUrl"
             data-disqus-identifier="http://ch.ege.io/blog/2015/08/03/installing-stm32cubemx-on-linux/">Comments</a>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/2015/08/03/installing-stm32cubemx-on-linux/" itemprop="url">Installing STM32CubeMX on Linux</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><p>The STMicroelectronics STM32CubeMX is delivered as a exe file what implies that it is eintended to run on Windows systems only. But due to the fact it is a JAVA application we can run it on Linux as-well.</p>

<h1>Installation</h1>

<p>To install the STM32CubeMX administration rights are needed</p>

<pre><code>sudo java -jar /tmp/SetupSTM32CubeMX-4.9.0.exe
</code></pre>

<h1>Running STM32CubeMX</h1>

<p>If you&rsquo;ve selected the default install location you can run STM32CubeMX like this:</p>

<pre><code>java -jar /usr/local/STMicroelectronics/STM32Cube/STM32CubeMX/STM32CubeMX.exe
</code></pre>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2015-07-18T08:26:39+02:00"  data-updated="true" itemprop="datePublished dateCreated">Sat 18 Jul 2015,  8:26 AM</time>
        
           | <a href="/blog/2015/07/18/nim-dvb-s-slash-s2-v1-dot-0-pinout/#disqus_thread" itemprop="discussionUrl"
             data-disqus-identifier="http://ch.ege.io/blog/2015/07/18/nim-dvb-s-slash-s2-v1-dot-0-pinout/">Comments</a>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/2015/07/18/nim-dvb-s-slash-s2-v1-dot-0-pinout/" itemprop="url">[WIP] NIM_DVB-S/S2 V1.0 Pinout</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><p>This is a work in progress article and will be updated over time.</p>

<table>
<thead>
<tr>
<th style="text-align:center;"> PIN </th>
<th style="text-align:center;"> Side B        </th>
<th style="text-align:center;"> Side A         </th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">  1  </td>
<td style="text-align:center;">  GND          </td>
<td style="text-align:center;"> n.c.           </td>
</tr>
<tr>
<td style="text-align:center;">  2  </td>
<td style="text-align:center;">  n.c.         </td>
<td style="text-align:center;"> GND            </td>
</tr>
<tr>
<td style="text-align:center;">  3  </td>
<td style="text-align:center;">  n.c.         </td>
<td style="text-align:center;"> n.c.           </td>
</tr>
<tr>
<td style="text-align:center;">  4  </td>
<td style="text-align:center;">  n.c.         </td>
<td style="text-align:center;"> n.c.           </td>
</tr>
<tr>
<td style="text-align:center;">  5  </td>
<td style="text-align:center;">  n.c.         </td>
<td style="text-align:center;"> n.c.           </td>
</tr>
<tr>
<td style="text-align:center;">  6  </td>
<td style="text-align:center;">  n.c.         </td>
<td style="text-align:center;"> GND            </td>
</tr>
<tr>
<td style="text-align:center;">  7  </td>
<td style="text-align:center;">  n.c.         </td>
<td style="text-align:center;"> n.c.           </td>
</tr>
<tr>
<td style="text-align:center;">  8  </td>
<td style="text-align:center;">  n.c.         </td>
<td style="text-align:center;"> GND            </td>
</tr>
<tr>
<td style="text-align:center;">  9  </td>
<td style="text-align:center;">  n.c.         </td>
<td style="text-align:center;"> n.c.           </td>
</tr>
<tr>
<td style="text-align:center;"> 10  </td>
<td style="text-align:center;">  n.c.         </td>
<td style="text-align:center;"> n.c.           </td>
</tr>
<tr>
<td style="text-align:center;"> 11  </td>
<td style="text-align:center;">  n.c.         </td>
<td style="text-align:center;"> GND            </td>
</tr>
<tr>
<td style="text-align:center;"> &ndash;  </td>
<td style="text-align:center;">  Key notch    </td>
<td style="text-align:center;"> Key notch      </td>
</tr>
<tr>
<td style="text-align:center;"> 12  </td>
<td style="text-align:center;">  GND          </td>
<td style="text-align:center;"> GND            </td>
</tr>
<tr>
<td style="text-align:center;"> 13  </td>
<td style="text-align:center;">  n.c.         </td>
<td style="text-align:center;"> n.c.           </td>
</tr>
<tr>
<td style="text-align:center;"> 14  </td>
<td style="text-align:center;">  n.c.         </td>
<td style="text-align:center;"> n.c.           </td>
</tr>
<tr>
<td style="text-align:center;"> 15  </td>
<td style="text-align:center;">  n.c.         </td>
<td style="text-align:center;"> GND            </td>
</tr>
<tr>
<td style="text-align:center;"> 16  </td>
<td style="text-align:center;">  n.c.         </td>
<td style="text-align:center;"> n.c.           </td>
</tr>
<tr>
<td style="text-align:center;"> 17  </td>
<td style="text-align:center;">  n.c.         </td>
<td style="text-align:center;"> n.c.           </td>
</tr>
<tr>
<td style="text-align:center;"> 18  </td>
<td style="text-align:center;">  GND          </td>
<td style="text-align:center;"> GND            </td>
</tr>
</tbody>
</table>

</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2015-07-18T07:40:11+02:00"  data-updated="true" itemprop="datePublished dateCreated">Sat 18 Jul 2015,  7:40 AM</time>
        
           | <a href="/blog/2015/07/18/pci-express-connectors-from-china/#disqus_thread" itemprop="discussionUrl"
             data-disqus-identifier="http://ch.ege.io/blog/2015/07/18/pci-express-connectors-from-china/">Comments</a>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/2015/07/18/pci-express-connectors-from-china/" itemprop="url">PCI-Express Connectors From China</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><p>After my decision to build a full <a href="/blog/2015/07/04/full-open-source-dvb-s2-board/">Open Source Software based DVB-S2 USB module</a> I ordered some PCI-Express connectors from <a href="http://s.click.aliexpress.com/e/A6qjiaIUr?af=704840420">China on Aliexpress</a>. The delivery time was quite low I received my package about 11 days after placing my order. This is really quick for standard delivery from China to Germany. Next step will be adding this connector to <a href="http://www.cadsoft.de/">Eagle PCB Design Software</a>. And designing a small breadboard to PCI-Express board and host it on <a href="https://oshpark.com/">OSHPark</a>.</p>

<p><img src="/images/posts/IMG_5144.jpg"></p>

<p>I have not found any data sheet for this connector yet. On one side it has an engraving with <a href="http://www.te.com">,,tyco/Electronics&#8221;</a> and on the other side some code ,,08306ED&#8217;&lsquo;.</p>

<h2>Update</h2>

<p>After some research I found a ,,data sheet&#8217;&lsquo; <a href="http://www.te.com/usa-en/product-4-1775800-2.html">ENG_DS_4-1773442-7_0308-2.pdf</a> but it lacks detailed drawings about the PIN pitch. After some research I discovered that those connectors are described in the <a href="https://www.google.com/search?q=PCI+Express+Card+Electromechanical+Specification">PCI Express Card Electromechanical Specification</a>.</p>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2015-07-04T19:43:00+02:00"  data-updated="true" itemprop="datePublished dateCreated">Sat  4 Jul 2015,  7:43 PM</time>
        
           | <a href="/blog/2015/07/04/full-open-source-dvb-s2-board/#disqus_thread" itemprop="discussionUrl"
             data-disqus-identifier="http://ch.ege.io/blog/2015/07/04/full-open-source-dvb-s2-board/">Comments</a>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/2015/07/04/full-open-source-dvb-s2-board/" itemprop="url">Full Open Source DVB-S2 Board</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><p>Some time ago I thought it would be fun to build a USB DVB-S2 device which runs on 100% OpenSource Software. Due to the fact I do not have any tooling for soldering complex chips I decided to build this project on hardware which is already available. For interconnection of the DVB part with the PC or a Single board computer like the ODROID-C1 or Raspberry PI my decision was to use a <a href="http://www.cypress.com/?id=193">Cypress FX2 CY7C68013A</a> evaluation board. You can buy them for under 10€ in far east on ebay. I bought one of the <a href="http://sigrok.org/wiki/Lcsoft_Mini_Board">Lcsoft Mini Boards</a>. The coreboot project provides a <a href="http://www.coreboot.org/File:Fx2lp_lcsoft_schematic_A.pdf">schematic for the Lcsoft board</a>.</p>

<p><img src="http://sigrok.org/wimg/e/ec/Lcsoft-miniboard-front.png" title="'Lcsoft Mini Board CC-BY 3.0'" ></p>

<p>The <a href="http://www.cypress.com/?id=193">Cypress FX2 CY7C68013A</a> is based on a 8051 core. Not one of my favorite hacking platform but I&rsquo;ll give it a try. There is a Open Source Framework for firmware development it is called <a href="https://github.com/djmuhlestein/fx2lib">fxlib</a>. After some research on Google I found the project <a href="http://qanu.de/termini.php">Termini</a>. The firmware for the Termini hardware is available via the linuxtv.org <a href="http://linuxtv.org/cgi-bin/viewvc.cgi/dvb-hw/dvbusb-fx2/termini/">CVS repository</a>. They provide a specification for the <a href="http://qanu.de/docs/dvbt-usb-spec.pdf">USB communication</a> between the host controller and the FX2. There are already some USB 2.0 USB DVB-S2 devices based on the <a href="http://www.cypress.com/?id=193">Cypress FX2 CY7C68013A</a> like the <a href="http://www.linuxtv.org/wiki/index.php/DVBSKY_S960">DVBSKY S960</a>.</p>

<p>The last part in the jigsaw puzzle is the DVB-S2 tuner and demodulator part. Some of the linux based Set-Top-Boxes provide swappable tuner modules one of them is the manufacturer GigaBlue. They sell a <a href="http://www.gigablue.de/portfolio-item/gigablue-dvb-s2-tuner/">DVB-S2 Tuner</a> based on the Serit <a href="http://serit.hk/Products_Details.aspx?IDX=144">SP2246 NIM for DVB-S2</a>. The SP2246 is based on the <a href="http://www.st.com/web/catalog/mmc/FM131/SC1003/PF251478">STV6111</a> tuner and the <a href="http://www.st.com/web/catalog/mmc/FM131/SC628/SS1334/PF252767?s_searchtype=partnumber">STV0913</a> demodulator. It looks like the tuner module is connected via a <a href="https://en.wikipedia.org/wiki/PCI_Express#Form_factors">PCI-Express x1 36Pin</a> connector. Serit provides a very detailed <a href="http://serit.hk/Manager/Public/pdf/201212070342307ead.pdf">data sheet</a> so at least a few of the PINs should be easily mappable with a multi meter.</p>

<p><img src="/images/posts/sp2246.jpg"></p>
</div>
  
  


        </article>
      
      
        <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
          
  <header class="page-header">
    
      <p class="meta text-muted text-uppercase">
        












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2015-06-15T08:09:57+02:00"  data-updated="true" itemprop="datePublished dateCreated">Mon 15 Jun 2015,  8:09 AM</time>
        
           | <a href="/blog/2015/06/15/watterott-hdmi-slash-dvi-rgb-adapter-edid-hacks/#disqus_thread" itemprop="discussionUrl"
             data-disqus-identifier="http://ch.ege.io/blog/2015/06/15/watterott-hdmi-slash-dvi-rgb-adapter-edid-hacks/">Comments</a>
        
      </p>
    
    
      <h2 class="entry-title" itemprop="name headline"><a href="/blog/2015/06/15/watterott-hdmi-slash-dvi-rgb-adapter-edid-hacks/" itemprop="url">Watterott HDMI/DVI - RGB Adapter EDID Hacks</a></h2>
    
  </header>


  <div class="entry-content clearfix" itemprop="articleBody description"><p>The German Maker supplier <a href="http://www.watterott.com">Watterott</a> sells a <a href="http://www.watterott.com/en/HDMI-RGB-adapter-with-ATmega32U4-touch-controller">HDMI/DVI to RGB Display adapter</a>. The Adapter itself contains a ATmega32U4 controller attached to USB, which works as touchcontroller.  The designs and firmware for the adapter are available on <a href="https://github.com/watterott/HDMI-Display">GitHub</a>. I am not sure if we can call this OpenSource because of a missing License file.</p>

<p><img class="center" src="https://raw.githubusercontent.com/watterott/HDMI-Display/master/hardware/HDMI-Display_v10dev.jpg"></p>

<p>Beside the HDMI/DVI Bridge controller the board contains a EEPREOM to store the <a href="https://en.wikipedia.org/wiki/Extended_Display_Identification_Data">EDID</a> data. EDID is needed to provide the attached Host device like your PC or Mac to identify what resolution and capabilities your Display has.</p>

<p>Due to the fact that the adapter supports a <a href="https://github.com/watterott/HDMI-Display/blob/master/docu/Displays.md">wide range</a> of displays the EEPROM is not programmed on a freshly ordered board.</p>

<h1>Flashing the EDID EEPROM</h1>

<p>Watterott suggests to flash the EEPROM through the ATmega32U4 controller and provides <a href="https://github.com/watterott/HDMI-Display/blob/master/docu/FAQ.md#how-to-flashupdate-the-edid-eeprom">a short description</a> how to do this. But this requires to close two solder jumpers. I decided to flash the EDID EEPROM with my <a href="http://dangerousprototypes.com/docs/Bus_Pirate">Bus Pirate</a> and the <a href="http://www.delock.de/produkte/G_65168/merkmale.html?setLanguage=en">Delock 65168</a></p>

<p><img class="center" src="http://www.bilder.delock.de/produkte/orig/50f030782950b0.34465021.jpg"></p>

<p>For me the <a href="http://www.delock.de/produkte/G_65168/merkmale.html?setLanguage=en">Delock 65168</a> is the perfect toy to play around with EDID or <a href="https://en.wikipedia.org/wiki/HDMI#CEC">HDMI CEC</a>.</p>

<p>The host controller communicates through <a href="https://en.wikipedia.org/wiki/I%C2%B2C">I2C</a> with the EDID EEPROM. There are at least 3 line needed to establish the <a href="https://en.wikipedia.org/wiki/I%C2%B2C">I2C</a> communication. You need a good ground connection <strong>(GND)</strong> and a clock line <strong>(SCL)</strong> and of course the data line <strong>(SDA)</strong></p>
</div>
  
  


        </article>
      
    </div>

    <ul class="pager">
      
        <li class="previous"><a href="/posts/2">&larr;&nbsp;Older</a></li>
      
      <li><a href="/blog/archives">Blog Archives</a></li>
      
        <li class="next disabled"><a href="#">Newer&nbsp;&rarr;</a></li>
      
    </ul>
  </div>

  
    <aside class="sidebar col-md-3">
      
        <section class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Recent Posts</h3>
  </div>
  
  <div id="recent_posts" class="list-group">
    
    <a class="list-group-item " href="/blog/2016/01/31/unbricking-a-buffalo-whr-hp-g300n/">Unbricking a Buffalo WHR-HP-G300N</a>
    
    <a class="list-group-item " href="/blog/2015/11/01/activating-usb-otg-udoo-neos-composite-ethernet-plus-serial-gadget-support-in-yoctos-poky/">Activating USB_OTG Composite Ethernet + Serial Gadget Support in Yocto&#8217;s Poky for UDOO Neo</a>
    
    <a class="list-group-item " href="/blog/2015/10/31/attaching-a-serial-console-to-udoo-neo/">Attaching a Serial Console to UDOO Neo</a>
    
    <a class="list-group-item " href="/blog/2015/09/22/tweaking-freescales-yocto-community-bsp-builds/">Tweaking Freescales Yocto Community BSP Builds</a>
    
    <a class="list-group-item " href="/blog/2015/09/19/openembedded-support-for-the-upcomming-udoo-neo/">OpenEmbedded Support for the Upcomming UDOO Neo</a>
    
  </div>
</section>




<section class="googleplus googleplus-hidden panel panel-default">
  <div class="panel-body">
    <h2>
      <a href="https://plus.google.com/+ChristianEge?rel=author">
        <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
        Google+
      </a>
    </h2>
  </div>
</section>



      
    </aside>
  
</div>

        </div>
      </div>
    </div>
    <footer role="contentinfo"><div class="container">
    <p class="text-muted credits">
  Copyright &copy; 2016 - Christian Ege<br>
  <small>
      <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>,
      <span class="credit">customized with <a href="https://github.com/kAworu/octostrap3">octostrap3</a></span>.
  </small>
</p>

</div>
</footer>
    

<script type="text/javascript">
      var disqus_shortname = 'sturmschneid';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


<script src="/assets/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="/javascripts/modernizr.js"></script>


  </body>
</html>
